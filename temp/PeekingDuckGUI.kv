#:kivy 2.0.0
#:import hex kivy.utils.get_color_from_hex

###############
# GUI templates
###############
<PkdButton@Button>:
    font_size: "12sp"
    color: 0,0,0,1  # black button text
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: hex("#C0C0C0") if self.state == "normal" else hex("#808080")
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(8),]

<__MenuSep__@Label>:
    size_hint: 0.04, 1.00

<FileLoadDialog>:
    BoxLayout:
        id: id_box
        orientation: "vertical"
        size: root.size
        pos: root.pos
        file_chooser: id_file_chooser.__self__
        FileChooserListView:
            id: id_file_chooser
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Load"
                on_release: root.load(id_file_chooser.path, id_file_chooser.selection)

###################
#
# The root widget
#
###################
<PeekingDuckGUI>:
    # accessible widgets
    pipeline_scrollview: id_pipeline_scrollview
    main_screen: id_main_screen

    canvas.before:
        Color:
            rgba: hex("#C0C0C0")    # silver
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:
        id: id_floatlayout

        ####################
        # top menu
        ####################
        FloatLayout:
            pos_hint: {'x':0.005, 'y':0.945}
            size_hint: 0.99, 0.05
            canvas.before:
                Color:
                    rgba: hex("#0000cd")    # medium blue
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [dp(8),]
            # bottom: left half
            BoxLayout:
                orientation: "horizontal"
                pos_hint: {'x':0.010, 'y':0.10}
                size_hint: 0.48, 0.80
                canvas.before:
                    Color:
                        rgba: hex("#0000cd")    # medium blue
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(8),]

                ###############
                # Menu buttons
                ###############
                PkdButton:
                    id: id_btn_about
                    text: "About"
                    on_release: root.btn_about()
                __MenuSep__
                PkdButton:
                    id: id_btn_load
                    text: "Load File"
                    on_release: root.btn_load_file()
                __MenuSep__
                PkdButton:
                    id: id_btn_load
                    text: "Save File"
                    on_release: root.btn_save_file()
                __MenuSep__
                PkdButton:
                    id: id_btn_exit
                    text: "Exit"
                    on_release: app.stop()

        ####################
        # middle screen
        ####################
        ScrollView:
            id: id_pipeline_scrollview
            pos_hint: {'x':0.005, 'y':0.07}
            size_hint: 0.30, 0.87
            background_color: 0,0,0,0
            canvas.before:
                Color:
                    rgba: hex("#000077")    # darker blue
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [dp(10),]
            do_scroll_x: False
            do_scroll_y: True
            scroll_hint: 1, None
        FloatLayout:
            id: id_main_screen
            pos_hint: {'x':0.315, 'y':0.07}
            size_hint: 0.68, 0.87
            background_color: 0,0,0,0
            canvas.before:
                Color:
                    rgba: hex("#000000")    # black
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [dp(10),]

        ####################
        # bottom controls
        ####################
        FloatLayout:
            pos_hint: {'x':0.005, 'y':0.005}
            size_hint: 0.99, 0.06
            background_color: 0,0,0,0
            canvas.before:
                Color:
                    rgba: hex("#ff0000")    # red
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [dp(8),]
            # bottom: left half
            BoxLayout:
                orientation: "horizontal"
                pos_hint: {'x':0.010, 'y':0.10}
                size_hint: 0.48, 0.80
                canvas.before:
                    Color:
                        rgba: hex("#ff0000")    # red light
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(8),]

                #################
                # Control buttons
                #################
                PkdButton:
                    id: id_btn_back
                    text: "<<"
                __MenuSep__
                PkdButton:
                    id: id_btn_play
                    text: ">"
                    font_size: "16sp"
                __MenuSep__
                PkdButton:
                    id: id_btn_forward
                    text: ">>"
                __MenuSep__
                PkdButton:
                    id: id_btn_pause
                    text: "||"